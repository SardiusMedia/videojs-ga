/*
* videojs-ga - v0.4.2 - 2017-09-19
* Copyright (c) 2017 Michael Bensoussan
* Licensed MIT
*/
(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};videojs.plugin("ga",function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;return null==b&&(b={}),c={},this.options()["data-setup"]&&(m=JSON.parse(this.options()["data-setup"]),m.ga&&(c=m.ga)),d=["loaded","percentsPlayed","start","end","seek","play","pause","resize","volumeChange","error","fullscreen"],i=b.eventsToTrack||c.eventsToTrack||d,p=b.percentsPlayedInterval||c.percentsPlayedInterval||10,x=b.trackPlayedInterval||c.trackPlayedInterval||!1,g=b.eventCategory||c.eventCategory||"Video",h=b.eventId||c.eventId,b.debug=b.debug||!1,o=[],t=s=0,u=!1,k=0,l=function(){h||(h=this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i,"")),a.call(i,"loadedmetadata")>=0&&v(h,h,"loadedmetadata",!0)},w=function(){var b,c,d,e,f,g;for(b=Math.round(this.currentTime()),c=Math.round(this.duration()),e=Math.round(b/c*100),d=g=0;99>=g;d=g+=p)e===d&&a.call(o,d)<0&&(f=("0"+d).slice(-2),a.call(i,"start")>=0&&0===d&&e>0?(v(h,"start","start playback",!0),v(h,"percent played",f,!0,d)):a.call(i,"percentsPlayed")>=0&&0!==e&&v(h,"percent played",f,!0,d),e>0&&o.push(d));x&&x>=b-k&&v(h,"time played",b,!0,b),a.call(i,"seek")>=0&&(t=s,s=b,Math.abs(t-s)>1&&(u=!0,v(h,"seek start",t,!1,t),v(h,"seek end",s,!1,s)))},e=function(){v(h,"end","end video",!0)},q=function(){var a;a=Math.round(this.currentTime()),v(h,"play",a,!0,a),u=!1},n=function(){var a,b;a=Math.round(this.currentTime()),b=Math.round(this.duration()),a===b||u||v(h,"pause",a,!1,a)},y=function(){var a;a=this.muted()===!0?0:this.volume(),v(h,"volume change",a,!1,a)},r=function(){v(h,"resize",this.width()+"*"+this.height(),!0)},f=function(){var a,b;a=Math.round(this.currentTime()),b=this.error(),v(h,"error",JSON.stringify(b),!0,a)},j=function(){var a;a=Math.round(this.currentTime()),("function"==typeof this.isFullscreen?this.isFullscreen():void 0)||("function"==typeof this.isFullScreen?this.isFullScreen():void 0)?v(h,"fullscreen","enter",!1,a):v(h,"fullscreen","exit",!1,a)},v=function(a,c,d,e,f){window.ga?ga("send","event",{eventCategory:a,eventAction:c,eventLabel:d,eventValue:f,nonInteraction:e}):window._gaq?_gaq.push(["_trackEvent",a,c,eventLabel,f,e]):b.debug&&console.log("Google Analytics not detected")},this.ready(function(){return this.on("loadedmetadata",l),this.on("timeupdate",w),a.call(i,"end")>=0&&this.on("ended",e),a.call(i,"play")>=0&&this.on("play",q),a.call(i,"pause")>=0&&this.on("pause",n),a.call(i,"volumeChange")>=0&&this.on("volumechange",y),a.call(i,"resize")>=0&&this.on("resize",r),a.call(i,"error")>=0&&this.on("error",f),a.call(i,"fullscreen")>=0?this.on("fullscreenchange",j):void 0}),{sendbeacon:v}})}).call(this);